<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <link rel="icon" href="favicon.ico">
  
  <meta property="og:title" content="Thorntales">
<meta property="og:description" content="Verbal art.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://www.thorntales.net/">
<meta property="og:image" content="https://www.thorntales.net/assets/preview.png">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Home</title>
  <link rel="stylesheet" href="./assets/style.css" />
</head>
<body>
  <main class="wrap">
    <header class="top">
      <h1>Вы в Башне Тысячи Витражей</h1>
      <p class="sub">Странная карта несуществующего мира. Измените seed чтобы поменять случайную генерацию.</p>
    </header>

<div class="map-block">

  <div class="map-controls">
    <label>Seed
      <input id="seed" type="number" value="6000">
    </label>

    <label>Size
      <select id="size">
        <option>512</option>
        <option selected>768</option>
        <option>1024</option>
      </select>
    </label>
	
	<label>Mode
  <select id="mode">
    <option value="biomes" selected>Biomes</option>
    <option value="height">Height</option>
  </select>
</label>

    <label>Continents
      <input id="contMin" type="number" min="1" max="10" value="2">
      –
      <input id="contMax" type="number" min="1" max="10" value="6">
    </label>

    <label>Sea
      <input id="sea" type="number" step="0.01" min="0.05" max="0.95" value="0.30">
    </label>

    <label>Rivers
      <input id="rivers" type="number" value="1800">
    </label>
	
	<label>Mountains
  <input id="mount" type="number" step="0.01" min="0" max="0.6" value="0.18">
</label>

<label>Deserts
  <input id="desert" type="number" step="0.01" min="0" max="1" value="0.35">
</label>

    <button id="gen">Generate</button>
  </div>

  <canvas id="map"></canvas>

</div>

<script src="./assets/terrain-map.js"></script>
<script>
  function gen() {
    const seed = parseInt(document.getElementById('seed').value, 10) || 6000;
    const size = parseInt(document.getElementById('size').value, 10) || 768;
    let contMin = parseInt(document.getElementById('contMin').value, 10) || 2;
	let riverThreshold = parseInt(document.getElementById('rivers').value, 10) || 1800;
	let mountainsStrength = parseFloat(document.getElementById('mount').value) || 0.18;
	let desertStrength = parseFloat(document.getElementById('desert').value) || 0.35;
    let contMax = parseInt(document.getElementById('contMax').value, 10) || 6;
    contMin = Math.max(1, Math.min(contMin, 12));
    contMax = Math.max(contMin, Math.min(contMax, 12));
	let seaLevel = parseFloat(document.getElementById('sea').value) || 0.30;
	const mode = document.getElementById('mode').value || 'biomes';
	
	
	
	TerrainMap.render({
	  canvas: document.getElementById('map'),
	  size,
	  seed,
	  seaLevel,
	  riverThreshold,
	  continentsMin: contMin,
	  continentsMax: contMax,
	  plates: 18,     // попробуй 12..24
	  windDir: 'W',   // 'W'|'E'|'N'|'S'
	  mountainsStrength,
	  desertStrength,
	  mode,
	});
  }
  
  

  document.getElementById('gen').addEventListener('click', gen);
  gen();
</script>

    <footer class="bottom">
      <small>© 2025</small>
    </footer>
  </main>

</body>
</html>
